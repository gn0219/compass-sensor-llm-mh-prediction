# Reasoning Methods and Output Constraints Configuration
# Defines different reasoning approaches and output formatting

metadata:
  name: "Reasoning & Output Configuration"
  version: "1.0"
  description: "Templates for reasoning instructions and output constraints"

# ============================================================================
# REASONING METHODS
# ============================================================================
reasoning_methods:
  # -------------------------
  # 1. Direct Prediction
  # -------------------------
  direct:
    name: "Direct"
    description: "Immediate prediction without explicit reasoning steps"
    instruction: |
      Based on the behavioral data provided, make your prediction.
    
    output_format: |
      Please provide your prediction in the following JSON format:
      {
        "Prediction": {
          "Anxiety": "Low Risk" or "High Risk",
          "Depression": "Low Risk" or "High Risk"
        }
      }
  
  # -------------------------
  # 2. Chain-of-Thought (CoT)
  # -------------------------
  cot:
    name: "Chain-of-Thought"
    description: "Step-by-step reasoning process"
    instruction: |
      Please think step-by-step about the behavioral patterns and provide your 
      reasoning before making a prediction.
      
      Follow these steps:
      1. **Observe Patterns**: Identify key behavioral features and their values
      2. **Compare to Clinical Knowledge**: Relate patterns to known indicators
      3. **Assess Risk Factors**: Evaluate presence of risk/protective factors
      4. **Make Prediction**: Provide final risk assessment
    
    output_format: |
      Please provide your response in the following JSON format:
      {
        "Step1_ObservePatterns": "Description of observed behavioral patterns",
        "Step2_CompareToClinicalKnowledge": "How these patterns compare to the clinical knowledge",
        "Step3_IdentifyRiskFactors": "Key risk or protective factors identified",
        "Step4_MakePrediction": "Final reasoning and prediction",
        "Prediction": {
          "Anxiety": "Low Risk" or "High Risk",
          "Depression": "Low Risk" or "High Risk"
        }
      }
  
  # -------------------------
  # 3. Self-Feedback (Self-Evolving)
  # -------------------------
  self_feedback:
    name: "Self-Feedback"
    description: "Iterative reasoning with self-assessment and refinement"
    initial_instruction: |
      Based on the behavioral data and any examples provided, analyze the patterns carefully and make your prediction.
      
      IMPORTANT: You must adhere to the following assessment rubric and output format.
      
      ## Difficulty Assessment Rubric
      You MUST classify the difficulty of this prediction as Easy, Medium, or Hard based *only* on the following criteria:
      - Easy: Strong, consistent data signals. Clear conclusion. Interpretation is straightforward.
      - Medium: Mixed or conflicting signals. Requires nuanced interpretation (e.g., subtle patterns, inter-participant variability). Conclusion is plausible but uncertain.
      - Hard: Very weak, sparse, or contradictory data. Highly ambiguous case with significant confounding factors. High risk of misinterpretation.

    initial_output_format: |
      Please provide your response in the following JSON format:
      {
        "Prediction": {
          "Anxiety": "Low Risk" or "High Risk",
          "Depression": "Low Risk" or "High Risk"
        },
        "Confidence": {
          "Anxiety": "High" or "Medium" or "Low",
          "Depression": "High" or "Medium" or "Low"
        },
        "Key_Insights": "Summarize the main patterns and indicators you observed in 2-3 sentences",
        "Difficulty": "Easy" or "Medium" or "Hard",
        "Challenges": "Explain *why* you chose this difficulty level based on the Rubric (Easy/Medium/Hard). E.g., for 'Easy', explain what made it straightforward. For 'Medium/Hard', explain the conflicting signals, variability, etc.",
        "Focus_Areas_for_Refinement": "If Medium or Hard: what aspects should be examined more carefully in a second analysis?"
      }
    
    refinement_instruction: |
      You previously made a prediction that was marked as difficulty: {difficulty}. Here is your previous analysis:
      
      {previous_response}
      
      ---
      
      Now, REFINE this prediction. 
      Perform a deeper analysis *specifically addressing the "Challenges" and "Focus_Areas_for_Refinement"* from your previous response.
      
      After your re-analysis, you MUST re-assess the difficulty using the following rubric:
      - Easy: Strong, consistent data signals. Clear conclusion. Interpretation is straightforward.
      - Medium: Mixed or conflicting signals. Requires nuanced interpretation (e.g., subtle patterns, inter-participant variability). Conclusion is plausible but uncertain.
      - Hard: Very weak, sparse, or contradictory data. Highly ambiguous case with significant confounding factors. High risk of misinterpretation.

    refinement_output_format: |
      Please provide your refined response in the following JSON format:
      {
        "Refined_Prediction": {
          "Anxiety": "Low Risk" or "High Risk",
          "Depression": "Low Risk" or "High Risk"
        },
        "Confidence": {
          "Anxiety": "High" or "Medium" or "Low",
          "Depression": "High" or "Medium" or "Low"
        },
        "Refined_Analysis": "Explain how your re-analysis *addressed the previous 'Challenges' and 'Focus_Areas'* and led to the new prediction.",
        "Difficulty": "Easy" or "Medium" or "Hard",
        "Changes_from_Initial": "Describe what changed (prediction, confidence, and/or difficulty rating) and why. If no change, explain why."
      }

# Output constraints
# output_constraints:
  # header: "## Guidelines"
  # do_header: "\n**DO:**"
  # do:
  #   - "Consider temporal patterns (long-term trends, recent changes, deltas if provided)"
  #   - "Cite specific features you used and tie them to clinical associations"
  #   - "Follow the exact output schema"
  
  # dont_header: "\n**DON'T:**"
  # dont:
  #   - "Don't predict 'Medium Risk' - only Low Risk or High Risk"
  
  # # Response format requirements
  # format_requirements:
  #   response_type: "json"
  #   ensure_parseable: true
  #   prediction_format: "Must be exactly 'Low Risk' or 'High Risk'"
  #   required_fields:
  #     - "Prediction"
  #     - "Anxiety"
  #     - "Depression"
  
  # # Reasoning quality guidelines
  # reasoning_quality:
  #   - "Be specific: cite actual feature values"
  #   - "Be balanced: consider both risk and protective factors"
  #   - "Be evidence-based: link observations to clinical knowledge"
  #   - "Be concise: focus on the most relevant patterns"

# ============================================================================
# TASK COMPLETION PROMPT
# ============================================================================
task_completion:
  header: "## Your Prediction Task"
  instruction: |
    Now, please analyze the following user's behavioral data and provide your 
    prediction for their anxiety and depression risk levels.
  
  data_header: "### User Data to Predict"
  
  reminder: |
    Remember to:
    - Consider all available features
    - Follow the specified reasoning method
    - Use the exact output format required
    - Provide clear, evidence-based reasoning

